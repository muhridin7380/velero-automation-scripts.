"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[16070],{16070:(e,n,t)=>{t.d(n,{Y0:()=>A,$I:()=>I,kR:()=>R});var i=t(74848),l=t(31315),r=t(79634),s=t(3433),a=t(82518),o=t(30459),c=t(51587),u=t(38621),d=t(11680),m=t(96540),h=t(16522),g=t(84268),p=t(57387);let y=30,f=[{id:"one-day",text:"One day",days:1},{id:"one-week",text:"One week",days:7},{id:"one-month",text:"One month",days:y},{id:"one-year",text:"One year",days:365}],b=()=>f.findIndex(e=>e.days===y);function x(e){let n,t,l,r=(0,h.c)(7),{ssoOrgs:s}=e;if(1===s.length){let e,n=s[0],t=n?.name;return r[0]!==t?(e=(0,i.jsxs)("p",{children:["You are dismissing single sign-on prompts for the ",t," organization on this device."]}),r[0]=t,r[1]=e):e=r[1],e}return r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("p",{children:"You are dismissing single sign-on prompts for the following organizations on this device:"}),r[2]=n):n=r[2],r[3]!==s?(t=s.map(_),r[3]=s,r[4]=t):t=r[4],r[5]!==t?(l=(0,i.jsxs)(i.Fragment,{children:[n,(0,i.jsx)("ul",{className:"GlobalSSOBanner-module__dismissedOrgList--Jkrx7",children:t})]}),r[5]=t,r[6]=l):l=r[6],l}function _(e){return(0,i.jsx)("li",{children:e.name},e.id)}try{x.displayName||(x.displayName="DismissalSummary")}catch{}var S=t(94236),j=t(5524),v=t(46251);function O(e){let n,t,l,r,s,a=(0,h.c)(11),{selectedDurationIndex:o,onDurationChange:c}=e,d=f[o];a[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{id:"dismissal-duration-label",children:"Remind me again in"}),a[0]=n):n=a[0];let m=d?.text||"Pick duration";return a[1]!==m?(t=(0,i.jsx)(S.W.Button,{trailingAction:u.TriangleDownIcon,"aria-labelledby":"dismissal-duration-label",children:m}),a[1]=m,a[2]=t):t=a[2],a[3]!==c||a[4]!==o?(l=f.map((e,n)=>(0,i.jsx)(j.l.Item,{role:"menuitemradio",selected:n===o,"aria-checked":n===o,onSelect:()=>c(n),children:e.text},e.id)),a[3]=c,a[4]=o,a[5]=l):l=a[5],a[6]!==l?(r=(0,i.jsx)(S.W.Overlay,{children:(0,i.jsx)(j.l,{selectionVariant:"single",role:"menu","aria-labelledby":"dismissal-duration-label",children:l})}),a[6]=l,a[7]=r):r=a[7],a[8]!==t||a[9]!==r?(s=(0,i.jsxs)(v.B,{align:"center",direction:"horizontal",className:"GlobalSSOBanner-module__durationSelector--DOJjX",children:[n,(0,i.jsxs)(S.W,{children:[t,r]})]}),a[8]=t,a[9]=r,a[10]=s):s=a[10],s}try{O.displayName||(O.displayName="DurationMenu")}catch{}function N(e){let n,t,l,r,s,a,o,c,u,d,_=(0,h.c)(23),{isOpen:S,onClose:j,onConfirm:v,ssoOrgs:N}=e,[$,k]=m.useState(b);_[0]!==S?(n=()=>{S&&k(b())},t=[S],_[0]=S,_[1]=n,_[2]=t):(n=_[1],t=_[2]),m.useEffect(n,t),_[3]!==v||_[4]!==$?(l=()=>{let e=f[$];v(e?.days??y)},_[3]=v,_[4]=$,_[5]=l):l=_[5];let C=l;return S?(_[6]!==j?(r={buttonType:"default",content:"Cancel",onClick:j},_[6]=j,_[7]=r):r=_[7],_[8]!==C?(s={buttonType:"primary",content:"Confirm",onClick:C},_[8]=C,_[9]=s):s=_[9],_[10]!==r||_[11]!==s?(a=[r,s],_[10]=r,_[11]=s,_[12]=a):a=_[12],_[13]!==N?(o=(0,i.jsx)(x,{ssoOrgs:N}),_[13]=N,_[14]=o):o=_[14],_[15]!==$?(c=(0,i.jsx)(O,{selectedDurationIndex:$,onDurationChange:k}),_[15]=$,_[16]=c):c=_[16],_[17]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsxs)("p",{children:["To sign into any of your SSO organizations, visit the"," ",(0,i.jsx)(g.A,{href:"/settings/organizations",inline:!0,children:"SSO settings page."})]}),_[17]=u):u=_[17],_[18]!==j||_[19]!==a||_[20]!==o||_[21]!==c?(d=(0,i.jsxs)(p.l,{title:"Dismiss SSO Banner",width:"medium",height:"auto",onClose:j,footerButtons:a,children:[o,c,u]}),_[18]=j,_[19]=a,_[20]=o,_[21]=c,_[22]=d):d=_[22],d):null}try{N.displayName||(N.displayName="ConfirmationDialog")}catch{}function $({children:e,hidden:n}){let[t,l]=m.useState("visible"),r=m.useRef(null),s=m.useRef(void 0);return(m.useEffect(()=>{if(n&&"visible"===t){l("collapsing");let e=r.current;if(e){let n=e.getBoundingClientRect().height;s.current=n,e.style.height=`${n}px`}}else if("collapsing"===t){let e=setTimeout(()=>{l("hidden")},300);return()=>{clearTimeout(e)}}},[n,t]),"hidden"===t)?null:(0,i.jsx)("div",{ref:r,style:{height:"visible"===t?s.current??"auto":0},className:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",children:(0,i.jsx)("div",{className:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",style:{transform:"visible"===t?void 0:`translateY(-${s.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{$.displayName||($.displayName="SlideDismiss")}catch{}var k=t(77430),C=t(21373),z=t(79988);function D(e,n){let t=`/orgs/${encodeURIComponent(e)}/sso`,i=n.pathname+n.search+n.hash;return`${t}?return_to=${encodeURIComponent(i)}`}function w(e){let n,t,l,r,s,a=(0,h.c)(20),{ssoOrgs:c,redirectLocation:u}=e,{sendClickAnalyticsEvent:d}=(0,o.S)();if(0===c.length)return null;a[0]!==d?(n=()=>{d({category:z.c$,action:"click_single_sso_button",label:"sso_authentication"})},a[0]=d,a[1]=n):n=a[1];let m=n;a[2]!==d?(t=e=>{d({category:z.c$,action:"click_sso_dropdown_item",label:`org:${e}`})},a[2]=d,a[3]=t):t=a[3];let g=t;if(1===c.length){let e,n,t=c[0];return void 0===t?null:(a[4]!==t.login||a[5]!==u?(e=D(t.login,u),a[4]=t.login,a[5]=u,a[6]=e):e=a[6],a[7]!==m||a[8]!==e?(n=(0,i.jsx)(C.Q,{as:"a",href:e,onClick:m,children:"Single sign-on"}),a[7]=m,a[8]=e,a[9]=n):n=a[9],n)}if(a[10]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)(S.W.Button,{size:"small",children:"Single sign-on"}),a[10]=l):l=a[10],a[11]!==g||a[12]!==u||a[13]!==c){let e;a[15]!==g||a[16]!==u?(e=e=>(0,i.jsxs)(j.l.LinkItem,{href:D(e.login,u),onClick:()=>g(e.name),children:[e.avatar_url&&(0,i.jsx)(j.l.LeadingVisual,{children:(0,i.jsx)(k.r,{size:24,src:e.avatar_url})}),e.name]},e.login),a[15]=g,a[16]=u,a[17]=e):e=a[17],r=c.map(e),a[11]=g,a[12]=u,a[13]=c,a[14]=r}else r=a[14];return a[18]!==r?(s=(0,i.jsxs)(S.W,{children:[l,(0,i.jsx)(S.W.Overlay,{children:(0,i.jsx)(j.l,{children:r})})]}),a[18]=r,a[19]=s):s=a[19],s}try{w.displayName||(w.displayName="SSOActionMenu")}catch{}function B(){let e=(0,l.Ri)(z.z4);if(e?.value)try{let n=JSON.parse(e.value);return Array.isArray(n)?n:[]}catch(e){(0,l.Yj)(z.z4)}return[]}function T(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function I({ssoOrgs:e}){let n=(0,s.zy)(),[t,r]=m.useState("visible"),[c,h]=m.useState(!1),g=m.useRef(!1),{sendClickAnalyticsEvent:p}=(0,o.S)();return(m.useEffect(()=>{!g.current&&e.length>0&&((0,a.iv)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),g.current=!0)},[e]),0===e.length)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{hidden:"visible"!==t,children:(0,i.jsx)(d.l,{title:"Single sign-on",className:"GlobalSSOBanner-module__banner--kzCnx",hideTitle:!0,icon:(0,i.jsx)(u.ShieldLockIcon,{}),description:(()=>{if(0===e.length)return"Single sign-on to see results";let n=e.slice(0,z.n5),t=e.length-z.n5,l=1===e.length?"organization":"organizations";return(0,i.jsxs)(i.Fragment,{children:["Single sign-on to see results in the ",(()=>{let e=n.map(e=>(0,i.jsx)("strong",{children:e.name},e.login));if(1===e.length)return e[0];{if(2===e.length)return(0,i.jsxs)(i.Fragment,{children:[e[0]," and ",e[1]]});let n=e.length-1,l=(0,i.jsxs)(i.Fragment,{children:[e[0],", ",e[1],", and ",e[n]]});return t>0?(0,i.jsxs)(i.Fragment,{children:[l,", and ",t," more"]}):l}})()," ",l]})})(),onDismiss:()=>{p({category:z.c$,action:"click_dismiss_button",label:"banner_dismissed"}),h(!0)},primaryAction:(0,i.jsx)(w,{ssoOrgs:e,redirectLocation:n}),"data-testid":"global-sso-banner"})}),(0,i.jsx)(N,{isOpen:c,onClose:()=>h(!1),onConfirm:n=>{((n=y)=>{let t,i,s;r("hidden"),t=[...new Set([...B(),...e.map(e=>e.id)])].sort(),(0,l.Yj)(z.z4),i=n??y,s=new Date(Date.now()+24*i*36e5).toUTCString(),(0,l.TV)(z.z4,JSON.stringify(t),s)})(n),h(!1)},ssoOrgs:e})]})}function A(){let{ssoOrgs:e,suppressBanner:n}=function(){let e,{ssoOrgs:n,baseAvatarUrl:t}=(0,c.N)(),{current_sso_orgs_match_dismissed_cookie:i}=(0,r.X)()??{},l=m.useMemo(()=>n.filter(T).map(e=>({...e,avatar_url:`${t}/u/${e.id}`})),[n,t]);return{suppressBanner:!0===i||(e=B(),l.length===e.length&&l.every(n=>e.includes(n.id))),ssoOrgs:l,baseAvatarUrl:t}}();return 0===e.length||n?null:(0,i.jsx)(I,{ssoOrgs:e})}let R=z.z4;try{I.displayName||(I.displayName="GlobalSsoBanner")}catch{}try{A.displayName||(A.displayName="ContextualGlobalSsoBanner")}catch{}},31315:(e,n,t)=>{function i(e){return l(e)[0]}function l(e){let n=[];for(let t of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[i,l]=t.trim().split("=");e===i&&void 0!==l&&n.push({key:i,value:l})}return n}function r(e,n,t=null,i=!1,l="lax"){let s=document.domain;if(null==s)throw Error("Unable to get document domain");s.endsWith(".github.com")&&(s="github.com");let a="https:"===location.protocol?"; secure":"",o=t?`; expires=${t}`:"";!1===i&&(s=`.${s}`);try{document.cookie=`${e}=${n}; path=/; domain=${s}${o}${a}; samesite=${l}`}catch{}}function s(e,n=!1){let t=document.domain;if(null==t)throw Error("Unable to get document domain");t.endsWith(".github.com")&&(t="github.com");let i=new Date(Date.now()-1).toUTCString(),l="https:"===location.protocol?"; secure":"",r=`; expires=${i}`;!1===n&&(t=`.${t}`);try{document.cookie=`${e}=''; path=/; domain=${t}${r}${l}`}catch{}}t.d(n,{OR:()=>l,Ri:()=>i,TV:()=>r,Yj:()=>s})},51587:(e,n,t)=>{t.d(n,{N:()=>r});var i=t(79634),l=t(96540);let r=()=>{let e=(0,i.X)();return(0,l.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},79988:(e,n,t)=>{t.d(n,{c$:()=>i,n5:()=>l,z4:()=>r});let i="global_sso_banner",l=3,r="dismissed_sso_orgs"}}]);
//# sourceMappingURL=16070-10974f67d150.js.map