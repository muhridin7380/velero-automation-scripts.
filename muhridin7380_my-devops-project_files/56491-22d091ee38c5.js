"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[56491],{12171:(e,t,r)=>{r.d(t,{s:()=>a});let a=(e,t)=>t||(e.defaultValue?`Default (${s(e.defaultValue)})`:""),s=e=>Array.isArray(e)?e.join(", "):e},15631:(e,t,r)=>{r.d(t,{u:()=>s});var a=r(96540);function s(){let e=(0,a.useRef)({}),t=(0,a.useCallback)(t=>r=>{e.current[t]=r},[]);return{getRef:(0,a.useCallback)(t=>e.current[t]||null,[]),setRef:t}}},21157:(e,t,r)=>{r.d(t,{$:()=>l,O:()=>i});var a=r(96379),s=r(96540);function l(e,t){let[r,a]=(0,s.useState)("UNKNOWN");return{isValid:"VALID"===r,showError:"INVALID"===r,validate:async(r,s={})=>{if(a("UNKNOWN"),!t)return!0;let l=await n(r,`${e}/${t}`,s);return a(l),o(l)},reset:(e=!1)=>{a(e?"VALID":"UNKNOWN")}}}let n=async(e,t,r)=>{let s=await (0,a.lS)(t,{...r,method:"POST",body:e});if(s.ok){let{valid:e}=await s.json();return e?"VALID":"INVALID"}return 400===s.status?"INVALID":"UNKNOWN"},o=e=>{switch(e){case"VALID":case"UNKNOWN":return!0;case"INVALID":return!1}},i=async(e,t)=>o(await n(e,t))},30610:(e,t,r)=>{r.d(t,{o:()=>N});var a=r(74848),s=r(96540),l=r(15631),n=r(36818),o=r(99385),i=r(25407),u=r(38621),c=r(86877),d=r(46251),p=r(84268),m=r(51933),h=r(69497),y=r(34164),f=r(12171);let x="PropertiesValuesTableRows-module__tableRow--VJYEG";function w(e){let{propertyField:t,definition:r,showUndo:s,fetchAllowedValuesUrl:l,setRef:o,required:i}=e,{value:u,changed:d=!1,mixed:p=!1,error:m}=t||{},{propertyName:h,description:y}=r,f=`${h}-validation-error`,w=t=>e.onChange(h,t);return(0,a.jsx)(V,{className:x,children:(0,a.jsx)(v,{label:h,description:y,required:i,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__controlsContainer--Attdj",children:(0,a.jsx)(n.D9,{setRef:o,...r,propertyValue:u,mixed:p,onChange:w,inputProps:m?{"aria-describedby":f}:{},fetchAllowedValuesUrl:l})}),m&&(0,a.jsx)(c.A.Validation,{variant:"error",id:f,className:"PropertiesValuesTableRows-module__FormControl_Validation--O2g2Y",children:m})]}),trailing:(0,a.jsx)(n.F0,{definition:r,changed:d,onReset:()=>e.onReset(h),onChange:w,showUndo:s})})})}function g({propertyField:e,definition:t,required:r}){let{description:s,propertyName:l}=t,n=(0,f.s)(t,e?.value);return(0,a.jsx)(V,{className:x,children:(0,a.jsx)(v,{required:r,label:l,description:s,value:(0,a.jsxs)(d.B,{direction:"horizontal",gap:"condensed",children:[(0,a.jsx)(d.B.Item,{shrink:!1,children:(0,a.jsx)(u.ShieldLockIcon,{size:"small"})}),(0,a.jsx)(d.B.Item,{children:(0,a.jsx)("span",{children:n})})]})})})}function b({propertyField:e,definition:t,managedBySource:r,required:s}){let{description:l}=t;return(0,a.jsx)(V,{className:x,children:(0,a.jsx)(v,{required:s,label:t.propertyName,description:l,value:(0,a.jsx)(j,{propertyValue:e?.value,definition:t}),bottomMessage:r&&(0,a.jsxs)("div",{className:"d-inline",children:[(0,a.jsxs)("span",{className:"fg-muted",children:[(0,a.jsx)(u.ShieldLockIcon,{size:"small"})," Managed by"," "]}),(0,a.jsx)(p.A,{inline:!0,href:"org"===r.type?(0,i.p3r)({owner:r.slug}):(0,i.t4j)({slug:r.slug}),children:r.name})]})})})}function j({propertyValue:e,definition:t}){if((0,o.sX)(e))return(0,a.jsx)("span",{className:"fg-muted",children:"(Empty)"});switch(t.valueType){case"single_select":case"true_false":return(0,a.jsx)(m.A,{text:(0,a.jsx)(h.A,{title:e,maxWidth:"100%",children:e}),className:"PropertiesValuesTableRows-module__propertyToken--IwoPr"});case"multi_select":return(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(m.A,{text:(0,a.jsx)(h.A,{title:e,maxWidth:"100%",children:e}),className:"PropertiesValuesTableRows-module__spacedPropertyToken--K15OT"},e))});case"string":case"url":return(0,a.jsx)(h.A,{title:e,maxWidth:"100%",children:e})}}function V(e){return(0,a.jsx)("div",{"data-testid":"property-row",className:(0,y.$)("PropertiesValuesTableRows-module__propertyRow--LGKHN",e.className),children:e.children})}function v({label:e,description:t,bottomMessage:r,value:s,trailing:l,required:n}){return(0,a.jsxs)(c.A,{required:n,className:(0,y.$)("PropertiesValuesTableRows-module__FormControl--UgAzG",r&&"PropertiesValuesTableRows-module__hasBottomMessage--c4B6P"),children:[(0,a.jsx)(c.A.Label,{"data-testid":"property-name",className:"PropertiesValuesTableRows-module__FormControl_Label--gjsWv",children:e}),(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__formInputArea--rwZA8",children:s}),l?(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__actionButtonsArea--EqFyT",children:l}):null,t&&(0,a.jsx)(c.A.Caption,{className:"PropertiesValuesTableRows-module__FormControl_Caption--o_IdS",children:t}),r?(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__formMessageArea--hH8DD",children:r}):null]})}w.displayName="EditValueRow";try{g.displayName||(g.displayName="FormReadValueRow")}catch{}try{b.displayName||(b.displayName="ReadValueRow")}catch{}try{j.displayName||(j.displayName="DisplayPropertyValue")}catch{}try{V.displayName||(V.displayName="PropertyValueRowContainer")}catch{}try{v.displayName||(v.displayName="DataTableRow")}catch{}let N=e=>{let{definitions:t,propertyValuesMap:r,rowRenderer:n,ref:o}=e,{getRef:i,setRef:u}=(0,l.u)();return((0,s.useImperativeHandle)(o,()=>({focusInput:e=>{i(e)?.focus()}})),0===t.length)?null:(0,a.jsx)("div",{children:t.map(e=>{let{propertyName:t}=e,l=r[t];return(0,a.jsx)(s.Fragment,{children:n({definition:e,propertyField:l},u(t))},t)})})};N.displayName="PropertiesValuesTable",N.EditValueRow=w,N.ReadValueRow=b,N.FormReadValueRow=g,N.ValueRowContainer=V},34437:(e,t,r)=>{r.d(t,{u1:()=>j,EI:()=>V,AA:()=>m,_0:()=>x,ov:()=>h,Jj:()=>p,sq:()=>d,w4:()=>v});let a=["true","false"];var s=r(99385),l=r(25407),n=r(65232),o=r(96379);let i=/[^a-zA-Z0-9_#$-]/gu,u=/[^ -!#-~]/gu,c={maxPropertyValueLength:75,maxUrlPropertyValueLength:200};function d(e,t){if(e.length>75)return"Name cannot be longer than 75 characters";if(0===e.length)return"Name is required";for(let r of t)if(r.toLowerCase()===e.toLowerCase())return"Name already exists";let r=g(e,i);if(r)return`Name contains invalid characters: ${r}`}async function p(e,t){let r="Could not check property name";try{let a=await (0,o.lS)((0,l.wYU)({sourceName:e,propertyName:t}));if(a.ok){let{status:e,orgConflicts:r}=await a.json();switch(e){case"valid":return;case"already_exists":return{message:"Name already exists"};case"exists_in_business_orgs":return{message:`The property ${t} already exists in this enterprise`,orgConflicts:r}}}return{message:r}}catch{return{message:r}}}function m(e,t,r){let a=r||c,s=e.trim().toLowerCase();if(s.length>a.maxPropertyValueLength)return`Option cannot be longer than ${a.maxPropertyValueLength} characters`;if(0===s.length)return"Option cannot be empty";if(t.has(e))return"Option already exists";if(function(e,t){for(let r of t)if(r.toLowerCase()===e)return!0;return!1}(s,t))return"Option already exists";let l=g(e,u);if(l)return`Option contains invalid characters: ${l}`}function h(e){if(e.length>255)return"Description cannot be longer than 255 characters"}let y="Invalid value type",f="Default value should be a valid option";async function x(e,t,r,l=[],n,o){if(r){if(!e.length)return"Cannot be empty for a required property";switch(t){case"single_select":if((0,s.OD)(e))return y;if(!l.includes(e))return f;break;case"true_false":if((0,s.OD)(e))return y;if(!a.includes(e))return f;break;case"multi_select":if(!(0,s.OD)(e))return y;if(!e.every(e=>l.includes(e)))return f;break;case"string":if((0,s.OD)(e))return y;return await w(e,!1,n,o);case"url":if((0,s.OD)(e))return y;return await w(e,!0,n,o)}}}async function w(e,t,r,a){if(!e)return;let s=a||c,l=t?s.maxUrlPropertyValueLength:s.maxPropertyValueLength;if(e.length>l)return`Cannot be longer than ${l} characters`;let o=g(e,u);if(o)return`Contains invalid characters: ${o}`;if(t){let t;try{t=new URL(e)}catch{return"Invalid URL format"}if(!["http:","https:"].includes(t.protocol))return"URL scheme must be http or https";if(t.username||t.password)return"URL username/password are not allowed";if(!t.host)return"URL host must be present"}if(r&&!await (0,n.N)(r,e))return"Value does not match pattern"}function g(e,t){let r=Array.from(e.matchAll(t));return r?Array.from(new Set(r.map(e=>" "===e[0]?"whitespace":e[0]))).join(", "):""}let b="This property cannot be empty",j=(e,t)=>{let r=new Map(e.map(e=>[e.propertyName,e.regex||void 0])),a=new Set(e.filter(e=>"url"===e.valueType).map(e=>e.propertyName));return async(e,l)=>l&&!(0,s.OD)(l)&&await w(l,a.has(e),r.get(e),t)},V=(e,t)=>{let r=new Map(e.map(e=>[e.propertyName,e])),a=new Set(e.filter(e=>"url"===e.valueType).map(e=>e.propertyName));return async(e,l)=>{let n=r.get(e);if(n)return N(n,l)?b:l&&!(0,s.OD)(l)&&await w(l,a.has(e),n.regex||void 0,t)}},v=(e,t)=>{let r=new Map(t.map(e=>[e.propertyName,e])),a={};for(let t in e){let s=r.get(t),l=e[t]?.value;s&&N(s,l)&&(a[t]=b)}return a},N=(e,t)=>e.requireExplicitValues&&!t?.length},36818:(e,t,r)=>{r.d(t,{D9:()=>g,az:()=>f,ze:()=>y,D2:()=>S,vu:()=>$,F0:()=>D});var a=r(74848),s=r(99385),l=r(30093),n=r(97286),o=r(96379),i=r(38621),u=r(5839),c=r(21373),d=r(69497),p=r(96540);let m="(Mixed)",h={title:"No property values were found",body:"Try searching for a different value for results.",variant:"empty"};function y({setRef:e,propertyName:t,fetchAllowedValuesUrl:r,defaultValue:s,allowedValues:l,propertyValue:n,mixed:o,onChange:i,anchorProps:c}){let d=x({propertyName:t,defaultValue:s,allowedValues:l,mixed:o,initialSelection:n?[n]:[],fetchAllowedValuesUrl:r,anchorProps:c,setRef:e}),p=d.items.find(e=>e.text&&n===e.text);return(0,a.jsx)(u.X,{...d,onSelectedChange:e=>i(e?.text||""),selected:p,message:0===d.items.length?h:void 0})}function f({setRef:e,propertyName:t,defaultValue:r,allowedValues:s,propertyValue:l,mixed:n,onChange:o,anchorProps:i,fetchAllowedValuesUrl:c}){let d=x({propertyName:t,defaultValue:r,allowedValues:s,mixed:n,fetchAllowedValuesUrl:c,initialSelection:l,anchorProps:i,setRef:e}),p=d.items.filter(e=>e.selected);return(0,a.jsx)(u.X,{...d,onSelectedChange:e=>{let{filterValue:t}=d,r=e.map(e=>e.text||"");t?o([...l.filter(e=>!e.toLowerCase().includes(t.toLowerCase())),...r]):o(r)},selected:p,message:0===d.items.length?h:void 0})}function x(e){var t,r,l,u;let h,y,{defaultValue:f,mixed:x,initialSelection:g,anchorProps:b,setRef:j}=e,{data:V,isLoading:v,requestFetch:N}=function({propertyName:e,allowedValues:t,fetchAllowedValuesUrl:r}){let[a,s]=(0,p.useState)(!1),l=r?.(e),{data:i,isLoading:u}=(0,n.I)({queryKey:["queryCustomPropertyAllowedValues",e,l],queryFn:async()=>{let t=await (0,o.lS)(l||"");if(t.ok)return await t.json();throw Error(`${e}: Failed to fetch allowed values.`)},select:e=>e?.allowedValues,enabled:!t&&!!l&&a,initialData:t?{allowedValues:t}:void 0});if(!l&&!t)throw Error(`Allowed values cannot be fetched for ${e}. fetchAllowedValuesUrl is not configured.`);return{data:i,isLoading:u,requestFetch:()=>s(!0)}}(e),_=(0,p.useRef)(null),[C,P]=(0,p.useState)(!1),[A,T]=(0,p.useState)(""),R=(t=(0,p.useMemo)(()=>(V||[]).map(e=>{var t;return t=e,{id:t,text:t,selected:g.includes(e)}}),[V,g]),0===(h=(r=A.toLowerCase())?t.filter(e=>(e.text||"").toLowerCase().includes(r)):t).length?[]:h).filter((y=200,e=>e.selected?(y--,!0):!(y<=0)&&(y--,!0))),S=R.length>7?"medium":"auto",L=(l=g,u=f,x?m:(0,s.sX)(l)?(0,s.sX)(u)?"Choose an option":`Default (${w(u||"")})`:w(l));return{items:R,anchorRef:_,renderAnchor:e=>(0,a.jsx)(c.Q,{block:!0,alignContent:"start",trailingAction:i.TriangleDownIcon,className:"CustomPropertySelectPanel-module__CustomPropertySelectPanelButton--Sdiii",...e,...b,onMouseOver:N,onFocus:N,ref:e=>{_.current=e,j?.(e)},children:(0,a.jsx)(d.A,{maxWidth:"100%",title:L,children:L})}),placeholderText:"Search for values",filterValue:A,open:C,onFilterChange:T,onOpenChange:e=>{P(e),T("")},loading:v,overlayProps:{height:S,width:"medium"}}}function w(e){return(0,s.OD)(e)?e.length<=1?e[0]||"":`${e.length} selected`:e}try{y.displayName||(y.displayName="CustomPropertySingleSelectPanel")}catch{}try{f.displayName||(f.displayName="CustomPropertyMultiSelectPanel")}catch{}let g=({...e})=>{let{valueType:t}=e,r=e.propertyValue||(0,s.sN)(t);switch(t){case"single_select":return(0,a.jsx)(y,{...e,propertyValue:r});case"multi_select":return(0,a.jsx)(f,{...e,propertyValue:r});case"true_false":return(0,a.jsx)(y,{...e,allowedValues:["true","false"],propertyValue:r});case"string":case"url":return(0,a.jsx)(b,{...e,propertyValue:r});default:return null}};g.displayName="CustomPropertyInput";let b=({setRef:e,propertyValue:t,defaultValue:r,propertyName:s,mixed:n,onChange:o,inputProps:i})=>(0,a.jsx)(l.A,{ref:e,block:!0,"aria-label":s,onChange:e=>o(e.target.value),value:t,placeholder:n?m:r||"",...i});b.displayName="StringPropertyInput";var j=r(25407),V=r(84268),v=r(86877),N=r(51933),_=r(94236),C=r(26108),P=r(5524);let A="CustomPropertyValuesTable-module__mutedText--RDP72",T="CustomPropertyValuesTable-module__propertyLabel--qzHev",R="CustomPropertyValuesTable-module__propertyDescription--tF6IU";function S(e){let{definitions:t,propertyValuesMap:r,showUndo:s=!0,managedBySource:l}=e,{editableDefinitions:n,fetchAllowedValuesUrl:o}=e,i=(0,p.useMemo)(()=>new Set((n||[]).map(e=>e.propertyName)),[n]);return 0===t.length?null:(0,a.jsx)("div",{"data-testid":"custom-property-values-table",className:"CustomPropertyValuesTable-module__tableContainer--U6wM1",children:t.map(t=>{let{propertyName:n}=t,u=r[n],c="editableDefinitions"in e&&i.has(n),d=!1;return"requireExplicitValues"in t&&(d=!!t.requireExplicitValues),(0,a.jsx)("div",{"data-testid":"property-row",className:"CustomPropertyValuesTable-module__propertyRow--KufNg",children:c?(0,a.jsx)(I,{required:d,changed:!!u?.changed,mixed:!!u?.mixed,propertyValue:u?.value,definition:t,error:u?.error,onChange:t=>e.setPropertyValue(n,t),onReset:()=>e.revertPropertyValue(n),showUndo:s,fetchAllowedValuesUrl:o},n):(0,a.jsx)(L,{required:d,propertyValue:u?.value||t.defaultValue||"",definition:t,managedBySource:l},n)},n)})})}function L({propertyValue:e,definition:t,managedBySource:r,required:s}){let{description:l}=t;return(0,a.jsx)(q,{label:t.propertyName,description:l,required:s,value:(0,a.jsx)(E,{propertyValue:e,definition:t}),bottomMessage:r&&(0,a.jsxs)("div",{className:"CustomPropertyValuesTable-module__inlineContainer--cHYxE",children:[(0,a.jsxs)("span",{className:A,children:[(0,a.jsx)(i.ShieldLockIcon,{size:"small"})," Managed by"," "]}),(0,a.jsx)(V.A,{inline:!0,href:"org"===r.type?(0,j.p3r)({owner:r.slug}):(0,j.t4j)({slug:r.slug}),children:r.name})]})})}function I({propertyValue:e,definition:t,changed:r,mixed:s=!1,error:l,onChange:n,onReset:o,showUndo:i,fetchAllowedValuesUrl:u,required:c}){let{propertyName:d,description:p}=t,m=`${d}-validation-error`;return(0,a.jsx)(q,{label:t.propertyName,description:p,required:c,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"CustomPropertyValuesTable-module__controlsContainer--zrrgL",children:(0,a.jsx)(g,{...t,propertyValue:e,mixed:s,onChange:n,inputProps:l?{"aria-describedby":m}:{},fetchAllowedValuesUrl:u})}),l&&(0,a.jsx)(v.A.Validation,{variant:"error",id:m,className:"CustomPropertyValuesTable-module__FormControl_Validation--aR7wS",children:l})]}),trailing:(0,a.jsx)(D,{definition:t,changed:r,onReset:o,onChange:n,showUndo:i})})}function q({label:e,description:t,bottomMessage:r,value:s,trailing:l,required:n}){return(0,a.jsxs)(v.A,{required:n,className:"CustomPropertyValuesTable-module__FormControl--avnRx",children:[(0,a.jsx)(v.A.Label,{"data-testid":"property-name",className:"CustomPropertyValuesTable-module__FormControl_Label--PlZxB",children:e}),(0,a.jsx)("div",{className:"CustomPropertyValuesTable-module__formInputArea--W_l9i",children:s}),l?(0,a.jsx)("div",{className:"CustomPropertyValuesTable-module__formTrailingArea--SlMCn",children:l}):null,t&&(0,a.jsx)(v.A.Caption,{className:"CustomPropertyValuesTable-module__FormControl_Caption--dlmUq",children:t}),r?(0,a.jsx)("div",{className:"CustomPropertyValuesTable-module__formBottomMessageArea--exfME",children:r}):null]})}function E({propertyValue:e,definition:t}){if((0,s.sX)(e))return(0,a.jsx)("span",{className:A,children:"(Empty)"});switch(t.valueType){case"single_select":case"true_false":return(0,a.jsx)(N.A,{text:(0,a.jsx)(d.A,{title:e,maxWidth:"100%",children:e}),className:"CustomPropertyValuesTable-module__propertyToken--r6_sw"});case"multi_select":return(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(N.A,{text:(0,a.jsx)(d.A,{title:e,maxWidth:"100%",children:e}),className:"CustomPropertyValuesTable-module__spacedPropertyToken--Usibr"},e))});case"string":case"url":return(0,a.jsx)(d.A,{title:e,maxWidth:"100%",children:e})}}function D({definition:e,changed:t,showUndo:r=!0,onReset:s,onChange:l}){let{propertyName:n,required:o,source:u}=e,c=`Undo ${n} changes`,d=`Reset ${n} to default value`;return(0,a.jsxs)(_.W,{children:[(0,a.jsx)(_.W.Anchor,{children:(0,a.jsx)(C.K,{icon:i.KebabHorizontalIcon,variant:"invisible","aria-label":`Open reset options for ${n}`,description:"Reset options"})}),(0,a.jsx)(_.W.Overlay,{width:"small",children:(0,a.jsxs)(P.l,{children:[r&&(0,a.jsxs)(P.l.Item,{onSelect:s,"aria-label":c,inactiveText:t?void 0:"No change to undo",children:[(0,a.jsx)(P.l.LeadingVisual,{children:(0,a.jsx)(i.UndoIcon,{})}),(0,a.jsx)("span",{className:T,children:"Undo"}),(0,a.jsx)("span",{className:R,children:"Reset to the last used value"})]}),o&&(0,a.jsxs)(P.l.Item,{onSelect:()=>l(""),"aria-label":d,children:[(0,a.jsx)(P.l.LeadingVisual,{children:(0,a.jsx)(i.SyncIcon,{})}),(0,a.jsx)("span",{className:T,children:"Reset to default"}),(0,a.jsxs)("span",{className:R,children:["Inherit the value defined by the ","business"===u.type?"enterprise":"organization"]})]})]})})]})}try{S.displayName||(S.displayName="CustomPropertyValuesTable")}catch{}try{L.displayName||(L.displayName="CustomPropertyReadValueRow")}catch{}try{I.displayName||(I.displayName="CustomPropertyEditValueRow")}catch{}try{q.displayName||(q.displayName="DataTableRow")}catch{}try{E.displayName||(E.displayName="DisplayPropertyValue")}catch{}try{D.displayName||(D.displayName="ResetDropdown")}catch{}var k=r(46251),U=r(34164);let $=({ref:e,definitions:t,propertyValuesMap:r,editableDefinitions:s,showUndo:l=!0,showSummary:n,fetchAllowedValuesUrl:o,setPropertyValue:i,revertPropertyValue:u})=>{let c=(0,p.useMemo)(()=>new Set((s||[]).map(e=>e.propertyName)),[s]),{refsByPropertyName:d,setRef:m,clearRefs:h}=B();return((0,p.useEffect)(()=>{h()},[h,c]),(0,p.useImperativeHandle)(e,()=>({focusInput:e=>{d[e]?.focus()}})),0===t.length)?null:(0,a.jsx)("div",{children:t.map(e=>{let{propertyName:t}=e,s=r[t],d=c.has(t),p=!1;return"requireExplicitValues"in e&&(p=!!e.requireExplicitValues),(0,a.jsx)("div",{"data-testid":"property-row",className:(0,U.$)("CustomPropertyValuesTableV2-module__propertyRow--q6aaE",n?"CustomPropertyValuesTableV2-module__readRow--Nx4aJ":"CustomPropertyValuesTableV2-module__editRow--BuZLI"),children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-bold fgColor-default mr-2",children:`${t}:`}),(0,a.jsx)("span",{className:"fgColor-muted",children:M(e,s?.value)})]}):d?(0,a.jsx)(O,{setRef:e=>{m(t,e)},required:p,changed:!!s?.changed,mixed:!!s?.mixed,propertyValue:s?.value,definition:e,error:s?.error,onChange:e=>i(t,e),onReset:()=>u(t),showUndo:l,fetchAllowedValuesUrl:o},t):(0,a.jsx)(F,{required:p,propertyValue:s?.value,definition:e},t)},t)})})};$.displayName="CustomPropertyValuesTableV2";let O=({setRef:e,propertyValue:t,definition:r,changed:s,mixed:l=!1,error:n,onChange:o,onReset:i,showUndo:u,fetchAllowedValuesUrl:c,required:d})=>{let{propertyName:p,description:m}=r,h=`${p}-validation-error`;return(0,a.jsx)(W,{label:p,description:m,required:d,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"CustomPropertyValuesTableV2-module__controlsContainer--YH4ED",children:(0,a.jsx)(g,{setRef:e,...r,propertyValue:t,mixed:l,onChange:o,inputProps:n?{"aria-describedby":h}:{},fetchAllowedValuesUrl:c})}),n&&(0,a.jsx)(v.A.Validation,{variant:"error",id:h,className:"CustomPropertyValuesTableV2-module__FormControl_Validation--rzrTl",children:n})]}),trailing:(0,a.jsx)(D,{definition:r,changed:s,onReset:i,onChange:o,showUndo:u})})};function F({propertyValue:e,definition:t,required:r}){let{description:s,propertyName:l}=t,n=M(t,e);return(0,a.jsx)(W,{label:l,description:s,required:r,value:(0,a.jsxs)(k.B,{direction:"horizontal",gap:"condensed",children:[(0,a.jsx)(k.B.Item,{shrink:!1,children:(0,a.jsx)(i.ShieldLockIcon,{size:"small"})}),(0,a.jsx)(k.B.Item,{children:(0,a.jsx)("span",{children:n})})]})})}O.displayName="CustomPropertyEditValueRowV2";let M=(e,t)=>{if(t)return t;if(e.defaultValue){let t;return`Default (${Array.isArray(t=e.defaultValue)?t.join(", "):t})`}return""};function W({label:e,description:t,bottomMessage:r,value:s,required:l,trailing:n}){return(0,a.jsxs)(v.A,{required:l,className:(0,U.$)("CustomPropertyValuesTableV2-module__FormControl--RpNf5",r&&"CustomPropertyValuesTableV2-module__hasBottomMessage--qWmCe"),children:[(0,a.jsx)(v.A.Label,{"data-testid":"property-name",className:"CustomPropertyValuesTableV2-module__FormControl_Label--Z2nYd",children:e}),(0,a.jsx)("div",{className:"CustomPropertyValuesTableV2-module__formInputArea--tL4yC",children:s}),n?(0,a.jsx)("div",{className:"CustomPropertyValuesTableV2-module__actionButtonsArea--owwuT",children:n}):null,t&&(0,a.jsx)(v.A.Caption,{className:"CustomPropertyValuesTableV2-module__FormControl_Caption--lRw5X",children:t}),r?(0,a.jsx)("div",{className:"CustomPropertyValuesTableV2-module__formMessageArea--db_cl",children:r}):null]})}let B=()=>{let e=(0,p.useRef)({});return{refsByPropertyName:e.current,setRef:(t,r)=>{e.current[t]=r},clearRefs:()=>{e.current={}}}};try{F.displayName||(F.displayName="CustomPropertyReadValueRowV2")}catch{}try{W.displayName||(W.displayName="DataTableRow")}catch{}},41245:(e,t,r)=>{r.d(t,{A:()=>a});let a=(e,t)=>{let r=new URL(e,window.location.origin),a=new URL(t,window.location.origin);return a.href.includes("#")&&r.host===a.host&&r.pathname===a.pathname&&r.search===a.search}},46747:(e,t,r)=>{r.d(t,{d:()=>n});var a=r(31223),s=r(23125),l=r(96540);let n=(e,t,{leading:r=!1,maxWait:n,trailing:o=!0,onChangeBehavior:i="flush"}={})=>{let u=(0,a.M)(e),c=(0,l.useMemo)(()=>{let e=void 0===n?{leading:r,trailing:o}:{leading:r,trailing:o,maxWait:n};return(0,s.A)((...e)=>u.current(...e),t,e)},[u,t,r,n,o]);return(0,l.useEffect)(()=>()=>{c?.[i]()},[c,i]),c}},52475:(e,t,r)=>{r.d(t,{_S:()=>l,cB:()=>o,cW:()=>n});var a=r(53627),s=r(71315);let l=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},n=e=>{(0,a.C3)({appId:e})},o=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};s.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:o()})},!0)},53331:(e,t,r)=>{r.d(t,{A:()=>n,K:()=>s});var a=r(50467);function s(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}let l=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,a._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};function n(e,t,r=!1){let a=t.headers.get("content-type")||"";if(!r&&!a.startsWith("text/html"))throw new l(`expected response with text/html, but was ${a}`,t);if(r&&!(a.startsWith("text/html")||a.startsWith("application/json")))throw new l(`expected response with text/html or application/json, but was ${a}`,t);let s=t.headers.get("x-html-safe");if(s){if(!e.includes(s))throw new l("response X-HTML-Safe nonce did not match",t)}else throw new l("missing X-HTML-Safe nonce",t)}},58371:(e,t,r)=>{r.d(t,{Ax:()=>s.Ax,JW:()=>l,ZV:()=>s.ZV});var a=r(51987),s=r(13937);function l(e,t){(0,s.JW)(e,async(e,r,s)=>((0,a.tV)(s.headers),t(e,r,s)))}},65232:(e,t,r)=>{r.d(t,{N:()=>l});var a=r(25407),s=r(21157);let l=async(e,t)=>!(e?.length&&t?.length)||await (0,s.O)({pattern:e,value:t},(0,a.ygX)())},69759:(e,t,r)=>{r.d(t,{B:()=>a});function a(e,t){let r=e.createElement("template");return r.innerHTML=t,e.importNode(r.content,!0)}},70987:(e,t,r)=>{r.d(t,{r:()=>s});var a=r(97797);async function s(e){let t=document.querySelector("#site-details-dialog").content.cloneNode(!0),r=t.querySelector("details"),s=r.querySelector("details-dialog"),l=r.querySelector(".js-details-dialog-spinner");e.detailsClass&&r.classList.add(...e.detailsClass.split(" ")),e.dialogClass&&s.classList.add(...e.dialogClass.split(" ")),e.label?s.setAttribute("aria-label",e.label):e.labelledBy&&s.setAttribute("aria-labelledby",e.labelledBy),document.body.append(t);try{let t=await e.content;l.remove(),s.prepend(t)}catch{l.remove();let t=document.createElement("span");t.textContent=e.errorMessage||"Couldn't load the content",t.classList.add("my-6"),t.classList.add("mx-4"),s.prepend(t)}return r.addEventListener("toggle",()=>{r.hasAttribute("open")||((0,a.h)(s,"dialog:remove"),r.remove())}),s}},73192:(e,t,r)=>{r.d(t,{w:()=>n,x:()=>i});var a=r(99385),s=r(46747),l=r(96540);function n({propertyValues:e,editableDefinitions:t,propertyValueValidator:r},i=[]){let[u,c]=(0,l.useState)(()=>o(e,t)),[d,p]=(0,l.useState)({}),[m,h]=(0,l.useState)({});(0,l.useEffect)(()=>{h({}),c(o(e,t))},i);let y=(0,l.useCallback)(async(e,t)=>{let a=await r(e,t),s={...d};delete s[e],a&&(s[e]=a),p(s)},[d,r]),f=(0,s.d)(y,300,{onChangeBehavior:"cancel"});return{propertyValuesMap:(0,l.useMemo)(()=>{let e=Object.entries({...u,...m}).reduce((e,[t,r])=>{let s=u[t],l=t in m;if(!l&&s?.mixed)e[t]={propertyName:t,changed:!1,mixed:!0};else{let n=l&&(s?.mixed||!(0,a.tE)(s?.value,r.value)),o=l?r.value:s?.value;e[t]={value:o,changed:n,propertyName:t,mixed:!1}}return e},{});for(let t of Object.entries(d)){let[r,a]=t,s=e[r];s&&(s.error=a)}return e},[m,u,d]),setPropertyValue:function(e,t){h({...m,[e]:{value:t}}),f(e,t)},revertPropertyValue:function(e){let t={...m};delete t[e],h(t);let r={...d};delete r[e],p(r)},discardChanges:function(){h({})},commitChanges:function(){let e=Object.entries(m).reduce((e,[t,r])=>(e[t]={value:r.value},e),{});c({...u,...e}),h({})},propertyValuesErrors:e=>{p({...d,...e})}}}function o(e,t){let r={},s={};for(let t of e)for(let[e,l]of Object.entries(t)){let t=r[e];t?(0,a.tE)(t.value,l)||(r[e]={mixed:!0}):r[e]={value:l},s[e]||(s[e]=0),s[e]++}for(let[t,a]of Object.entries(s))r[t]&&a<e.length&&(r[t]={mixed:!0});for(let{propertyName:e}of t)r[e]||(r[e]={value:void 0});return r}function i(e,t){return e.reduce((e,r)=>{let s=t[r.propertyName];return s?.changed&&(e[r.propertyName]=s.value||(0,a.sN)(r.valueType)),e},{})}},74507:(e,t,r)=>{r.d(t,{Ay:()=>m,YU:()=>d,nA:()=>h});var a=r(70987),s=r(90891),l=r(58371),n=r(83315),o=r(51987);let i=!1;async function u(){let e=document.querySelector("link[rel=sudo-modal]"),t=document.querySelector(".js-sudo-prompt");if(t instanceof HTMLTemplateElement)return t;if(e){let t,r,a=await (0,s.Ts)(document,((r=new URLSearchParams((t=new URL(e.href,window.location.origin)).search.slice(1))).set("webauthn-support",(0,n.K)()),t.search=r.toString(),t.toString()));return document.body.appendChild(a),document.querySelector(".js-sudo-prompt")}throw Error("couldn't load sudo prompt")}let c=!1;async function d(e){if(i)return!1;i=!0,c=!1;let t=(await u()).content.cloneNode(!0),r=await (0,a.r)({content:t}),s=e?.closest("details[open]");return s&&s.removeAttribute("open"),await new Promise(e=>{r.addEventListener("dialog:remove",function(){s&&s.setAttribute("open","open"),i=!1,e()},{once:!0})}),c}async function p(e,t,r="Sudo authentication failed.",a="Too many authentication attempts. Please try again later.",s=".js-sudo-error",l){try{await t.text()}catch(n){let t;if(!n.response)throw n;switch(n.response.status){case 401:t=r;break;case 429:t=a;break;default:t="An unknown error occurred. Please try again later."}if(e.querySelector(s).textContent=t,e.querySelector(s).hidden=!1,l&&(e.querySelector(l).value=""),401!==n.response.status&&429!==n.response.status)throw n;return}c=!0,e.closest("details").removeAttribute("open")}async function m(e){let t=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,o.kt)()}});return!!t.ok&&"true"===await t.text()||d(e)}async function h(){let e=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,o.kt)()}});return!!e.ok&&"true"===await e.text()||!1}(0,l.JW)(".js-sudo-webauthn-form",async function(e,t){await p(e,t)}),(0,l.JW)(".js-sudo-github-mobile-form",async function(e,t){await p(e,t)}),(0,l.JW)(".js-sudo-totp-form",async function(e,t){await p(e,t,void 0,void 0,".flash-error","#totp")}),(0,l.JW)(".js-sudo-email-form",async function(e,t){await p(e,t,void 0,void 0,".flash-error","#email")}),(0,l.JW)(".js-sudo-password-form",async function(e,t){await p(e,t,"Incorrect password.","Too many password attempts. Please wait and try again.",void 0,".js-sudo-password")})},83315:(e,t,r)=>{r.d(t,{K:()=>s,e:()=>l});var a=r(74043);function s(){return(0,a.$j)()?"supported":"unsupported"}async function l(){return await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()?"supported":"unsupported"}},90891:(e,t,r)=>{r.d(t,{Ee:()=>o,Ts:()=>n,b4:()=>i});var a=r(53331),s=r(69759),l=r(51987);async function n(e,t,r){let n=new Request(t,r);(0,l.tV)(n.headers);let o=await self.fetch(n);if(o.status<200||o.status>=300)throw Error(`HTTP ${o.status}${o.statusText||""}`);return(0,a.A)((0,a.K)(e),o),(0,s.B)(e,await o.text())}function o(e,t,r=1e3,a=[200],s=[202]){return async function r(n){let o=new Request(e,t);(0,l.tV)(o.headers);let i=await self.fetch(o);if(s.includes(i.status))return await new Promise(e=>setTimeout(e,n)),r(1.5*n);if(a.includes(i.status))return i;if(i.status<200||i.status>=300)throw Error(`HTTP ${i.status}${i.statusText||""}`);throw Error(`Unexpected ${i.status} response status from poll endpoint`)}(r)}async function i(e,t,r){let{wait:a=500,acceptedStatusCodes:s=[200],max:n=3,attempt:o=0}=r||{},u=async()=>new Promise((r,i)=>{setTimeout(async()=>{try{let a=new Request(e,t);(0,l.tV)(a.headers);let i=await self.fetch(a);if(s.includes(i.status)||o+1===n)return r(i);r("retry")}catch(e){i(e)}},a*o)}),c=await u();return"retry"!==c?c:i(e,t,{wait:a,acceptedStatusCodes:s,max:n,attempt:o+1})}},96459:(e,t,r)=>{r.d(t,{Z:()=>u,o:()=>c});var a=r(96540),s=r(3433),l=r(41245),n=r(65432),o=r(58578),i=r(24518);let u=()=>{let{routes:e}=a.use(i.k),t=(0,s.Zp)();return a.useCallback((i,u={})=>{let c=(0,s.o1)(i).pathname;if(!(0,s.ue)(e,c)||u.reloadDocument){let e="string"==typeof i?i:(0,s.AO)(i);u.preventTurbo?window.location.href=e:(async()=>{let{softNavigate:t}=await Promise.all([r.e(7332),r.e(54563)]).then(r.bind(r,54563));t(e)})()}else{(0,l.A)(location.href,i.toString())||(0,n.SC)("react");let{preventAutofocus:e,...r}=u;(0,a.startTransition)(()=>{t(i,e?{...r,state:{[o.V]:!0,...r.state}}:r)})}},[t,e])},c=()=>{let[e]=(0,s.ok)(),t=u(),{pathname:r}=(0,s.zy)(),l=a.useCallback((a,l={})=>{t({pathname:r,search:(0,s.PI)("function"==typeof a?a(e):a).toString()},l)},[e,t,r]);return[e,l]}},97286:(e,t,r)=>{r.d(t,{I:()=>l});var a=r(1651),s=r(15985);function l(e,t){return(0,s.t)(e,a.$,t)}},99385:(e,t,r)=>{function a(e){return Array.isArray(e)}function s(e){return!e||0===e.length}function l(e){return"multi_select"===e?[]:""}function n(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((e,r)=>e===t[r]):e===t}r.d(t,{OD:()=>a,sN:()=>l,sX:()=>s,tE:()=>n})}}]);
//# sourceMappingURL=56491-464c23095c5b.js.map